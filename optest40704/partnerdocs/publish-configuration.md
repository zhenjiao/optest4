# Publish Configuration (.openpublishing.publish.config.json)

Publish configuration contains settings for build and publish. It is used
1. when you run [local build tool](local-build-and-preview.md) on your machine;
2. when OP build service publishes your docsets.

A template of publish configuration:
[!code-json[Main](_data/publish-configuration-template.json "template of publish configuration")]

Below table explains each key in the configuration.

> [!NOTE]
> Open Publishing service uses the value of [branches_to_filter](#publish-config-docsets_to_publish.branches_to_filter) from publish configuration in **live** branch.
> The setting of this key in other branches does not take effect.

| Key | Required or Optional? | Setting | Example |
| --- | --------------------- | ------- | ------- |
| <a name="publish-config-build_entry_point"></a>build_entry_point | optional | Indicate how to run build. Open Publishing tool runs with entry point `op` by default. Options are <ul><li>`op`, or `(leave it blank)`: run Open Publishing tool targeted to MSDN, TechNet, or VS.com.</li><li>`docs`: run Open Publishing tool targeted to Docs.</li></ul> | `"build_entry_point" : "op"` |
| package_version | optional | Open Publishing tool is versioned by NuGet packages. By default, the latest official version is used. Set this value to override the default behavior. Options are <ul><li>`latest`, or `(leave it blank)`: use latest official version of Open Publishing tool.</li><li>`latest-prerelease`: use latest prerelease version of Open Publishing tool.</li><li>`{the version number of the package}`: use that specified version of Open Publishing tool.</li></ul> | `"package_version" : "latest"` |
| <a name="publish-config-need_generate_pdf"></a>need_generate_pdf | optional | The value can be `True` or `False`. Default value is `False`. Only support build_entry_point `op` for now.<ul><li>`True`: if you want to generate pdf for each docset in the repo. You can get the generated pdf file from [portal](publish.md#service-built-pdf) </a> or [local](local-build-and-preview.md#local-pdf).</li><li>`False`: if you don't want to generate pdf. </li></ul> | `"need_generate_pdf": true` |
| git_repository_url_open_to_public_contributors | optional | It is used to generate content Git URL (contribute-to link) in published page. If [open_to_public_contributors](#publish-config-docsets_to_publish.open_to_public_contributors) is set to true for any docset in the repo, this config needs to be defined. It can be the same Git repo if the whole project is public. It can also be a separate public repo for external contribution while keeping the internal repo private, so that the contribute-to link will direct users to the public repo. Default is empty which means using the URL of current Git repo. | `"git_repository_url_open_to_public_contributors": "https://github.com/Microsoft/openpublishing-docs"` |
| git_repository_branch_open_to_public_contributors | optional | It is used to generate content Git URL (contribute-to link) in published page. If [open_to_public_contributors](#publish-config-docsets_to_publish.open_to_public_contributors) is set to true for any docset in the repo, this config could be defined. If it's not defined, the generated link would not contain branch information so it will go to the default branch of the repository. Note that in order to have this field take effect, the url parameter above must be defined explicitly.  | `"git_repository_branch_open_to_public_contributors": "master"` |
| <a name="publish-config-notification_subscribers"></a>notification_subscribers | optional | Provide the emails of whom want to receive the email notification. Separate each of the users or distribution lists by a comma. | `"notification_subscribers": ["mayast@microsoft.com", "yanz@microsoft.com", "fenxu@microsoft.com"]` |
| report_severity_level | optional | Specify the level of messages to contain in build report. Options are (ordering by severity): <ul><li>`Error`: include error messages only in build report. Error message usually hints there is an issue with content or service that blocks furthur processing or publishing of the contents.</li><li>`Warning`: include error and warning messages in build report. Warning message hints there is an issue that may require user attention, but the issue is non-blocking in build or publish. </li><li>`Info`: include error, warning and information messages in build report. Information messsage usually prints out notable information about build tool or service.</li><li>`Verbose`: include all levels of messages in build report. Verbose message contains all information in build and publish process and is useful for trouble shooting.</li></ul>Default is `Verbose`. | `"report_severity_level": "Verbose"` |
| <a name="publish-config-docsets_to_publish.branches_to_filter"></a>branches_to_filter | optional | You can exclude any branches from publishing. Recommended if people are new to Open Publishing to protect the "live" branch, so content does not get published by mistake. | `"branches_to_filter": ["live"]` |
| docsets_to_publish | required | A collection of docsets that need to be published. The following configurations are all configured on docset level for each docset. | See below examples. |
| docsets_to_publish.docset_name | required | Provide the name of the docset. The docset needs to provisioned on portal at first, otherwise the contents under the docset won't be published.<ul><li>For different docsets, the names should be different.</li><li>For docsets that are just different in locale or version, the names should be same. Otherwise, the fallback logic won't work.</li></ul> | `"docsets_to_publish": { "docset_name": "some_docset" }` |
| <a name="publish-config-docsets_to_publish.build_output_subfolder"></a>docsets_to_publish.build_output_subfolder | required | The relative output sub folder to put the built files of the build tool. In Open Publishing service, only those put in the folder get published. Recommended value is the relative path of the folder where the docset stays. | `"docsets_to_publish": { "build_output_subfolder": "openpublishing/docs" }` |
| docsets_to_publish.build_source_folder | optional | The relative sub folder of the docset in the repo. Normally, this setting should share the same value of [build_output_subfolder](#publish-config-docsets_to_publish.build_output_subfolder). Default is empty which means to use the same value as [build_output_subfolder](#publish-config-docsets_to_publish.build_output_subfolder). | `"docsets_to_publish": { "build_source_folder": "openpublishing/docs" }` |
| docsets_to_publish.build_entry_point | optional | Indicate how to run build for this docset. It shares the same options with [repo level setting](#publish-config-build_entry_point). <ul><li>If not specified, use the value of [repo level setting](#publish-config-build_entry_point).</li><li>If specified, overrides the value of [repo level setting](#publish-config-build_entry_point) for this docset.</li></ul> | `"docsets_to_publish": { "build_entry_point": "docs" }` |
| docsets_to_publish.version | required | Version of current content. Start from 0. | `"docsets_to_publish": { "version": 0 }` |
| docsets_to_publish.locale | required | Just leave it as "en-us" as localized repos are created/configured using the [.localization-config file](../partnerdocs/repo-creation.md). | `"docsets_to_publish": { "locale": "en-us" }` |
| <a name="publish-config-docsets_to_publish.open_to_public_contributors"></a>docsets_to_publish.open_to_public_contributors | optional | The value can be `True` or `False`. Here true means your content would accept community contribution, so there would be a button showing on the rendered page which directs external users to a repository to submit their pull requests. <ul><li>`True`: if you want your customers to contribute to the content.</li><li>`False`: if you do not want your customers to contribute to the content.</li></ul> | `"docsets_to_publish": { "open_to_public_contributors": true }` |
| docsets_to_publish.type_mapping | required | Internal used configuration. Should use the values shown in example. | `"docsets_to_publish": { "type_mapping": { "Conceptual": "Content", "ManagedReference": "Content", "RestApi": "Content" } }` |
